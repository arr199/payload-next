"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _reactrouterdom = require("react-router-dom");
const _types = require("../../../../fields/config/types");
const _getTranslation = require("../../../../utilities/getTranslation");
const _usePayloadAPI = /*#__PURE__*/ _interop_require_default(require("../../../hooks/usePayloadAPI"));
const _formatDate = require("../../../utilities/formatDate");
const _Gutter = require("../../elements/Gutter");
const _StepNav = require("../../elements/StepNav");
const _ActionsProvider = require("../../utilities/ActionsProvider");
const _Auth = require("../../utilities/Auth");
const _Config = require("../../utilities/Config");
const _DocumentInfo = require("../../utilities/DocumentInfo");
const _Locale = require("../../utilities/Locale");
const _Meta = /*#__PURE__*/ _interop_require_default(require("../../utilities/Meta"));
const _NotFound = /*#__PURE__*/ _interop_require_default(require("../NotFound"));
const _Compare = /*#__PURE__*/ _interop_require_default(require("./Compare"));
const _RenderFieldsToDiff = /*#__PURE__*/ _interop_require_default(require("./RenderFieldsToDiff"));
const _fields = /*#__PURE__*/ _interop_require_default(require("./RenderFieldsToDiff/fields"));
const _Restore = /*#__PURE__*/ _interop_require_default(require("./Restore"));
const _SelectLocales = /*#__PURE__*/ _interop_require_default(require("./SelectLocales"));
require("./index.scss");
const _shared = require("./shared");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'view-version';
const VersionView = ({ collection, global })=>{
    const { admin: { dateFormat }, localization, routes: { admin, api }, serverURL } = (0, _Config.useConfig)();
    const { setStepNav } = (0, _StepNav.useStepNav)();
    const { setViewActions } = (0, _ActionsProvider.useActions)();
    const { params: { id, versionID } } = (0, _reactrouterdom.useRouteMatch)();
    const [compareValue, setCompareValue] = (0, _react.useState)(_shared.mostRecentVersionOption);
    const [localeOptions] = (0, _react.useState)(()=>{
        if (localization && localization?.locales) {
            return localization.locales.map(({ code, label })=>({
                    label: label,
                    value: code
                }));
        }
        return [];
    });
    const [locales, setLocales] = (0, _react.useState)(localeOptions);
    const { permissions } = (0, _Auth.useAuth)();
    const { code: locale } = (0, _Locale.useLocale)();
    const { i18n, t } = (0, _reacti18next.useTranslation)('version');
    const { docPermissions } = (0, _DocumentInfo.useDocumentInfo)();
    let originalDocFetchURL;
    let versionFetchURL;
    let entityLabel;
    let fields;
    let fieldPermissions;
    let compareBaseURL;
    let slug;
    let parentID;
    if (collection) {
        ({ slug } = collection);
        originalDocFetchURL = `${serverURL}${api}/${slug}/${id}`;
        versionFetchURL = `${serverURL}${api}/${slug}/versions/${versionID}`;
        compareBaseURL = `${serverURL}${api}/${slug}/versions`;
        entityLabel = (0, _getTranslation.getTranslation)(collection.labels.singular, i18n);
        parentID = id;
        fields = collection.fields;
        fieldPermissions = permissions.collections[collection.slug].fields;
    }
    if (global) {
        ({ slug } = global);
        originalDocFetchURL = `${serverURL}${api}/globals/${slug}`;
        versionFetchURL = `${serverURL}${api}/globals/${slug}/versions/${versionID}`;
        compareBaseURL = `${serverURL}${api}/globals/${slug}/versions`;
        entityLabel = (0, _getTranslation.getTranslation)(global.label, i18n);
        fields = global.fields;
        fieldPermissions = permissions.globals[global.slug].fields;
    }
    const compareFetchURL = compareValue?.value === 'mostRecent' || compareValue?.value === 'published' ? originalDocFetchURL : `${compareBaseURL}/${compareValue.value}`;
    const [{ data: doc, isError }] = (0, _usePayloadAPI.default)(versionFetchURL, {
        initialParams: {
            depth: 1,
            locale: '*'
        }
    });
    const [{ data: publishedDoc }] = (0, _usePayloadAPI.default)(originalDocFetchURL, {
        initialParams: {
            depth: 1,
            locale: '*'
        }
    });
    const [{ data: mostRecentDoc }] = (0, _usePayloadAPI.default)(originalDocFetchURL, {
        initialParams: {
            depth: 1,
            draft: true,
            locale: '*'
        }
    });
    const [{ data: compareDoc }] = (0, _usePayloadAPI.default)(compareFetchURL, {
        initialParams: {
            depth: 1,
            draft: 'true',
            locale: '*'
        }
    });
    (0, _react.useEffect)(()=>{
        let nav = [];
        if (collection) {
            let docLabel = '';
            if (mostRecentDoc) {
                const { useAsTitle } = collection.admin;
                if (useAsTitle !== 'id') {
                    const titleField = collection.fields.find((field)=>(0, _types.fieldAffectsData)(field) && field.name === useAsTitle);
                    if (titleField && mostRecentDoc[useAsTitle]) {
                        if (titleField.localized) {
                            docLabel = mostRecentDoc[useAsTitle]?.[locale];
                        } else {
                            docLabel = mostRecentDoc[useAsTitle];
                        }
                    } else {
                        docLabel = `[${t('general:untitled')}]`;
                    }
                } else {
                    docLabel = mostRecentDoc.id;
                }
            }
            nav = [
                {
                    label: (0, _getTranslation.getTranslation)(collection.labels.plural, i18n),
                    url: `${admin}/collections/${collection.slug}`
                },
                {
                    label: docLabel,
                    url: `${admin}/collections/${collection.slug}/${id}`
                },
                {
                    label: 'Versions',
                    url: `${admin}/collections/${collection.slug}/${id}/versions`
                },
                {
                    label: doc?.createdAt ? (0, _formatDate.formatDate)(doc.createdAt, dateFormat, i18n?.language) : ''
                }
            ];
        }
        if (global) {
            nav = [
                {
                    label: global.label,
                    url: `${admin}/globals/${global.slug}`
                },
                {
                    label: 'Versions',
                    url: `${admin}/globals/${global.slug}/versions`
                },
                {
                    label: doc?.createdAt ? (0, _formatDate.formatDate)(doc.createdAt, dateFormat, i18n?.language) : ''
                }
            ];
        }
        setStepNav(nav);
    }, [
        setStepNav,
        collection,
        global,
        dateFormat,
        doc,
        mostRecentDoc,
        admin,
        id,
        locale,
        t,
        i18n
    ]);
    (0, _react.useEffect)(()=>{
        const editConfig = (collection || global)?.admin?.components?.views?.Edit;
        const versionActions = editConfig && 'Version' in editConfig && 'actions' in editConfig.Version ? editConfig.Version.actions : [];
        setViewActions(versionActions);
    }, [
        collection,
        global,
        setViewActions
    ]);
    let metaTitle;
    let metaDesc;
    const formattedCreatedAt = doc?.createdAt ? (0, _formatDate.formatDate)(doc.createdAt, dateFormat, i18n?.language) : '';
    if (collection) {
        const useAsTitle = collection?.admin?.useAsTitle || 'id';
        metaTitle = `${t('version')} - ${formattedCreatedAt} - ${doc[useAsTitle]} - ${entityLabel}`;
        metaDesc = t('viewingVersion', {
            documentTitle: doc[useAsTitle],
            entityLabel
        });
    }
    if (global) {
        metaTitle = `${t('version')} - ${formattedCreatedAt} - ${entityLabel}`;
        metaDesc = t('viewingVersionGlobal', {
            entityLabel
        });
    }
    let comparison = compareDoc?.version;
    if (compareValue?.value === 'mostRecent') {
        comparison = mostRecentDoc;
    }
    if (compareValue?.value === 'published') {
        comparison = publishedDoc;
    }
    const canUpdate = docPermissions?.update?.permission;
    if (isError) {
        return /*#__PURE__*/ _react.default.createElement(_NotFound.default, {
            marginTop: "large"
        });
    }
    return /*#__PURE__*/ _react.default.createElement("main", {
        className: baseClass
    }, /*#__PURE__*/ _react.default.createElement(_Meta.default, {
        description: metaDesc,
        title: metaTitle
    }), /*#__PURE__*/ _react.default.createElement(_Gutter.Gutter, {
        className: `${baseClass}__wrap`
    }, /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__header-wrap`
    }, /*#__PURE__*/ _react.default.createElement("p", {
        className: `${baseClass}__created-at`
    }, t('versionCreatedOn', {
        version: t(doc?.autosave ? 'autosavedVersion' : 'version')
    })), /*#__PURE__*/ _react.default.createElement("header", {
        className: `${baseClass}__header`
    }, /*#__PURE__*/ _react.default.createElement("h2", null, formattedCreatedAt), canUpdate && /*#__PURE__*/ _react.default.createElement(_Restore.default, {
        className: `${baseClass}__restore`,
        collection: collection,
        global: global,
        originalDocID: id,
        versionDate: formattedCreatedAt,
        versionID: versionID
    }))), /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__controls`
    }, /*#__PURE__*/ _react.default.createElement(_Compare.default, {
        baseURL: compareBaseURL,
        onChange: setCompareValue,
        parentID: parentID,
        publishedDoc: publishedDoc,
        value: compareValue,
        versionID: versionID
    }), localization && /*#__PURE__*/ _react.default.createElement(_SelectLocales.default, {
        onChange: setLocales,
        options: localeOptions,
        value: locales
    })), doc?.version && /*#__PURE__*/ _react.default.createElement(_RenderFieldsToDiff.default, {
        comparison: comparison,
        fieldComponents: _fields.default,
        fieldPermissions: fieldPermissions,
        fields: fields,
        locales: locales ? locales.map(({ label })=>typeof label === 'string' ? label : undefined) : [],
        version: doc?.version
    })));
};
const _default = VersionView;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL3ZpZXdzL1ZlcnNpb24vVmVyc2lvbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCB7IHVzZVJvdXRlTWF0Y2ggfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJ1xuXG5pbXBvcnQgdHlwZSB7IEZpZWxkUGVybWlzc2lvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9hdXRoJ1xuaW1wb3J0IHR5cGUgeyBGaWVsZCwgRmllbGRBZmZlY3RpbmdEYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vZmllbGRzL2NvbmZpZy90eXBlcydcbmltcG9ydCB0eXBlIHsgT3B0aW9uIH0gZnJvbSAnLi4vLi4vZWxlbWVudHMvUmVhY3RTZWxlY3QvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IFN0ZXBOYXZJdGVtIH0gZnJvbSAnLi4vLi4vZWxlbWVudHMvU3RlcE5hdi90eXBlcydcbmltcG9ydCB0eXBlIHsgQ29tcGFyZU9wdGlvbiwgUHJvcHMgfSBmcm9tICcuL3R5cGVzJ1xuXG5pbXBvcnQgeyBmaWVsZEFmZmVjdHNEYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vZmllbGRzL2NvbmZpZy90eXBlcydcbmltcG9ydCB7IGdldFRyYW5zbGF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL2dldFRyYW5zbGF0aW9uJ1xuaW1wb3J0IHVzZVBheWxvYWRBUEkgZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlUGF5bG9hZEFQSSdcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZm9ybWF0RGF0ZSdcbmltcG9ydCB7IEd1dHRlciB9IGZyb20gJy4uLy4uL2VsZW1lbnRzL0d1dHRlcidcbmltcG9ydCB7IHVzZVN0ZXBOYXYgfSBmcm9tICcuLi8uLi9lbGVtZW50cy9TdGVwTmF2J1xuaW1wb3J0IHsgdXNlQWN0aW9ucyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9BY3Rpb25zUHJvdmlkZXInXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL0F1dGgnXG5pbXBvcnQgeyB1c2VDb25maWcgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMvQ29uZmlnJ1xuaW1wb3J0IHsgdXNlRG9jdW1lbnRJbmZvIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL0RvY3VtZW50SW5mbydcbmltcG9ydCB7IHVzZUxvY2FsZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9Mb2NhbGUnXG5pbXBvcnQgTWV0YSBmcm9tICcuLi8uLi91dGlsaXRpZXMvTWV0YSdcbmltcG9ydCBOb3RGb3VuZCBmcm9tICcuLi9Ob3RGb3VuZCdcbmltcG9ydCBDb21wYXJlVmVyc2lvbiBmcm9tICcuL0NvbXBhcmUnXG5pbXBvcnQgUmVuZGVyRmllbGRzVG9EaWZmIGZyb20gJy4vUmVuZGVyRmllbGRzVG9EaWZmJ1xuaW1wb3J0IGZpZWxkQ29tcG9uZW50cyBmcm9tICcuL1JlbmRlckZpZWxkc1RvRGlmZi9maWVsZHMnXG5pbXBvcnQgUmVzdG9yZSBmcm9tICcuL1Jlc3RvcmUnXG5pbXBvcnQgU2VsZWN0TG9jYWxlcyBmcm9tICcuL1NlbGVjdExvY2FsZXMnXG5pbXBvcnQgJy4vaW5kZXguc2NzcydcbmltcG9ydCB7IG1vc3RSZWNlbnRWZXJzaW9uT3B0aW9uIH0gZnJvbSAnLi9zaGFyZWQnXG5cbmNvbnN0IGJhc2VDbGFzcyA9ICd2aWV3LXZlcnNpb24nXG5cbmNvbnN0IFZlcnNpb25WaWV3OiBSZWFjdC5GQzxQcm9wcz4gPSAoeyBjb2xsZWN0aW9uLCBnbG9iYWwgfSkgPT4ge1xuICBjb25zdCB7XG4gICAgYWRtaW46IHsgZGF0ZUZvcm1hdCB9LFxuICAgIGxvY2FsaXphdGlvbixcbiAgICByb3V0ZXM6IHsgYWRtaW4sIGFwaSB9LFxuICAgIHNlcnZlclVSTCxcbiAgfSA9IHVzZUNvbmZpZygpXG4gIGNvbnN0IHsgc2V0U3RlcE5hdiB9ID0gdXNlU3RlcE5hdigpXG5cbiAgY29uc3QgeyBzZXRWaWV3QWN0aW9ucyB9ID0gdXNlQWN0aW9ucygpXG5cbiAgY29uc3Qge1xuICAgIHBhcmFtczogeyBpZCwgdmVyc2lvbklEIH0sXG4gIH0gPSB1c2VSb3V0ZU1hdGNoPHsgaWQ/OiBzdHJpbmc7IHZlcnNpb25JRDogc3RyaW5nIH0+KClcblxuICBjb25zdCBbY29tcGFyZVZhbHVlLCBzZXRDb21wYXJlVmFsdWVdID0gdXNlU3RhdGU8Q29tcGFyZU9wdGlvbj4obW9zdFJlY2VudFZlcnNpb25PcHRpb24pXG4gIGNvbnN0IFtsb2NhbGVPcHRpb25zXSA9IHVzZVN0YXRlPE9wdGlvbltdPigoKSA9PiB7XG4gICAgaWYgKGxvY2FsaXphdGlvbiAmJiBsb2NhbGl6YXRpb24/LmxvY2FsZXMpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6YXRpb24ubG9jYWxlcy5tYXAoKHsgY29kZSwgbGFiZWwgfSkgPT4gKHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICB2YWx1ZTogY29kZSxcbiAgICAgIH0pKVxuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfSlcbiAgY29uc3QgW2xvY2FsZXMsIHNldExvY2FsZXNdID0gdXNlU3RhdGU8T3B0aW9uW10+KGxvY2FsZU9wdGlvbnMpXG4gIGNvbnN0IHsgcGVybWlzc2lvbnMgfSA9IHVzZUF1dGgoKVxuICBjb25zdCB7IGNvZGU6IGxvY2FsZSB9ID0gdXNlTG9jYWxlKClcbiAgY29uc3QgeyBpMThuLCB0IH0gPSB1c2VUcmFuc2xhdGlvbigndmVyc2lvbicpXG4gIGNvbnN0IHsgZG9jUGVybWlzc2lvbnMgfSA9IHVzZURvY3VtZW50SW5mbygpXG5cbiAgbGV0IG9yaWdpbmFsRG9jRmV0Y2hVUkw6IHN0cmluZ1xuICBsZXQgdmVyc2lvbkZldGNoVVJMOiBzdHJpbmdcbiAgbGV0IGVudGl0eUxhYmVsOiBzdHJpbmdcbiAgbGV0IGZpZWxkczogRmllbGRbXVxuICBsZXQgZmllbGRQZXJtaXNzaW9uczogUmVjb3JkPHN0cmluZywgRmllbGRQZXJtaXNzaW9ucz5cbiAgbGV0IGNvbXBhcmVCYXNlVVJMOiBzdHJpbmdcbiAgbGV0IHNsdWc6IHN0cmluZ1xuICBsZXQgcGFyZW50SUQ6IHN0cmluZ1xuXG4gIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgOyh7IHNsdWcgfSA9IGNvbGxlY3Rpb24pXG4gICAgb3JpZ2luYWxEb2NGZXRjaFVSTCA9IGAke3NlcnZlclVSTH0ke2FwaX0vJHtzbHVnfS8ke2lkfWBcbiAgICB2ZXJzaW9uRmV0Y2hVUkwgPSBgJHtzZXJ2ZXJVUkx9JHthcGl9LyR7c2x1Z30vdmVyc2lvbnMvJHt2ZXJzaW9uSUR9YFxuICAgIGNvbXBhcmVCYXNlVVJMID0gYCR7c2VydmVyVVJMfSR7YXBpfS8ke3NsdWd9L3ZlcnNpb25zYFxuICAgIGVudGl0eUxhYmVsID0gZ2V0VHJhbnNsYXRpb24oY29sbGVjdGlvbi5sYWJlbHMuc2luZ3VsYXIsIGkxOG4pXG4gICAgcGFyZW50SUQgPSBpZFxuICAgIGZpZWxkcyA9IGNvbGxlY3Rpb24uZmllbGRzXG4gICAgZmllbGRQZXJtaXNzaW9ucyA9IHBlcm1pc3Npb25zLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb24uc2x1Z10uZmllbGRzXG4gIH1cblxuICBpZiAoZ2xvYmFsKSB7XG4gICAgOyh7IHNsdWcgfSA9IGdsb2JhbClcbiAgICBvcmlnaW5hbERvY0ZldGNoVVJMID0gYCR7c2VydmVyVVJMfSR7YXBpfS9nbG9iYWxzLyR7c2x1Z31gXG4gICAgdmVyc2lvbkZldGNoVVJMID0gYCR7c2VydmVyVVJMfSR7YXBpfS9nbG9iYWxzLyR7c2x1Z30vdmVyc2lvbnMvJHt2ZXJzaW9uSUR9YFxuICAgIGNvbXBhcmVCYXNlVVJMID0gYCR7c2VydmVyVVJMfSR7YXBpfS9nbG9iYWxzLyR7c2x1Z30vdmVyc2lvbnNgXG4gICAgZW50aXR5TGFiZWwgPSBnZXRUcmFuc2xhdGlvbihnbG9iYWwubGFiZWwsIGkxOG4pXG4gICAgZmllbGRzID0gZ2xvYmFsLmZpZWxkc1xuICAgIGZpZWxkUGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucy5nbG9iYWxzW2dsb2JhbC5zbHVnXS5maWVsZHNcbiAgfVxuXG4gIGNvbnN0IGNvbXBhcmVGZXRjaFVSTCA9XG4gICAgY29tcGFyZVZhbHVlPy52YWx1ZSA9PT0gJ21vc3RSZWNlbnQnIHx8IGNvbXBhcmVWYWx1ZT8udmFsdWUgPT09ICdwdWJsaXNoZWQnXG4gICAgICA/IG9yaWdpbmFsRG9jRmV0Y2hVUkxcbiAgICAgIDogYCR7Y29tcGFyZUJhc2VVUkx9LyR7Y29tcGFyZVZhbHVlLnZhbHVlfWBcblxuICBjb25zdCBbeyBkYXRhOiBkb2MsIGlzRXJyb3IgfV0gPSB1c2VQYXlsb2FkQVBJKHZlcnNpb25GZXRjaFVSTCwge1xuICAgIGluaXRpYWxQYXJhbXM6IHsgZGVwdGg6IDEsIGxvY2FsZTogJyonIH0sXG4gIH0pXG4gIGNvbnN0IFt7IGRhdGE6IHB1Ymxpc2hlZERvYyB9XSA9IHVzZVBheWxvYWRBUEkob3JpZ2luYWxEb2NGZXRjaFVSTCwge1xuICAgIGluaXRpYWxQYXJhbXM6IHsgZGVwdGg6IDEsIGxvY2FsZTogJyonIH0sXG4gIH0pXG4gIGNvbnN0IFt7IGRhdGE6IG1vc3RSZWNlbnREb2MgfV0gPSB1c2VQYXlsb2FkQVBJKG9yaWdpbmFsRG9jRmV0Y2hVUkwsIHtcbiAgICBpbml0aWFsUGFyYW1zOiB7IGRlcHRoOiAxLCBkcmFmdDogdHJ1ZSwgbG9jYWxlOiAnKicgfSxcbiAgfSlcbiAgY29uc3QgW3sgZGF0YTogY29tcGFyZURvYyB9XSA9IHVzZVBheWxvYWRBUEkoY29tcGFyZUZldGNoVVJMLCB7XG4gICAgaW5pdGlhbFBhcmFtczogeyBkZXB0aDogMSwgZHJhZnQ6ICd0cnVlJywgbG9jYWxlOiAnKicgfSxcbiAgfSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBuYXY6IFN0ZXBOYXZJdGVtW10gPSBbXVxuXG4gICAgaWYgKGNvbGxlY3Rpb24pIHtcbiAgICAgIGxldCBkb2NMYWJlbCA9ICcnXG5cbiAgICAgIGlmIChtb3N0UmVjZW50RG9jKSB7XG4gICAgICAgIGNvbnN0IHsgdXNlQXNUaXRsZSB9ID0gY29sbGVjdGlvbi5hZG1pblxuXG4gICAgICAgIGlmICh1c2VBc1RpdGxlICE9PSAnaWQnKSB7XG4gICAgICAgICAgY29uc3QgdGl0bGVGaWVsZCA9IGNvbGxlY3Rpb24uZmllbGRzLmZpbmQoXG4gICAgICAgICAgICAoZmllbGQpID0+IGZpZWxkQWZmZWN0c0RhdGEoZmllbGQpICYmIGZpZWxkLm5hbWUgPT09IHVzZUFzVGl0bGUsXG4gICAgICAgICAgKSBhcyBGaWVsZEFmZmVjdGluZ0RhdGFcblxuICAgICAgICAgIGlmICh0aXRsZUZpZWxkICYmIG1vc3RSZWNlbnREb2NbdXNlQXNUaXRsZV0pIHtcbiAgICAgICAgICAgIGlmICh0aXRsZUZpZWxkLmxvY2FsaXplZCkge1xuICAgICAgICAgICAgICBkb2NMYWJlbCA9IG1vc3RSZWNlbnREb2NbdXNlQXNUaXRsZV0/Lltsb2NhbGVdXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkb2NMYWJlbCA9IG1vc3RSZWNlbnREb2NbdXNlQXNUaXRsZV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jTGFiZWwgPSBgWyR7dCgnZ2VuZXJhbDp1bnRpdGxlZCcpfV1gXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY0xhYmVsID0gbW9zdFJlY2VudERvYy5pZFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5hdiA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBnZXRUcmFuc2xhdGlvbihjb2xsZWN0aW9uLmxhYmVscy5wbHVyYWwsIGkxOG4pLFxuICAgICAgICAgIHVybDogYCR7YWRtaW59L2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbi5zbHVnfWAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZG9jTGFiZWwsXG4gICAgICAgICAgdXJsOiBgJHthZG1pbn0vY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uLnNsdWd9LyR7aWR9YCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnVmVyc2lvbnMnLFxuICAgICAgICAgIHVybDogYCR7YWRtaW59L2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbi5zbHVnfS8ke2lkfS92ZXJzaW9uc2AsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZG9jPy5jcmVhdGVkQXQgPyBmb3JtYXREYXRlKGRvYy5jcmVhdGVkQXQsIGRhdGVGb3JtYXQsIGkxOG4/Lmxhbmd1YWdlKSA6ICcnLFxuICAgICAgICB9LFxuICAgICAgXVxuICAgIH1cblxuICAgIGlmIChnbG9iYWwpIHtcbiAgICAgIG5hdiA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBnbG9iYWwubGFiZWwsXG4gICAgICAgICAgdXJsOiBgJHthZG1pbn0vZ2xvYmFscy8ke2dsb2JhbC5zbHVnfWAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ1ZlcnNpb25zJyxcbiAgICAgICAgICB1cmw6IGAke2FkbWlufS9nbG9iYWxzLyR7Z2xvYmFsLnNsdWd9L3ZlcnNpb25zYCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBkb2M/LmNyZWF0ZWRBdCA/IGZvcm1hdERhdGUoZG9jLmNyZWF0ZWRBdCwgZGF0ZUZvcm1hdCwgaTE4bj8ubGFuZ3VhZ2UpIDogJycsXG4gICAgICAgIH0sXG4gICAgICBdXG4gICAgfVxuXG4gICAgc2V0U3RlcE5hdihuYXYpXG4gIH0sIFtzZXRTdGVwTmF2LCBjb2xsZWN0aW9uLCBnbG9iYWwsIGRhdGVGb3JtYXQsIGRvYywgbW9zdFJlY2VudERvYywgYWRtaW4sIGlkLCBsb2NhbGUsIHQsIGkxOG5dKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWRpdENvbmZpZyA9IChjb2xsZWN0aW9uIHx8IGdsb2JhbCk/LmFkbWluPy5jb21wb25lbnRzPy52aWV3cz8uRWRpdFxuICAgIGNvbnN0IHZlcnNpb25BY3Rpb25zID1cbiAgICAgIGVkaXRDb25maWcgJiYgJ1ZlcnNpb24nIGluIGVkaXRDb25maWcgJiYgJ2FjdGlvbnMnIGluIGVkaXRDb25maWcuVmVyc2lvblxuICAgICAgICA/IGVkaXRDb25maWcuVmVyc2lvbi5hY3Rpb25zXG4gICAgICAgIDogW11cblxuICAgIHNldFZpZXdBY3Rpb25zKHZlcnNpb25BY3Rpb25zKVxuICB9LCBbY29sbGVjdGlvbiwgZ2xvYmFsLCBzZXRWaWV3QWN0aW9uc10pXG5cbiAgbGV0IG1ldGFUaXRsZTogc3RyaW5nXG4gIGxldCBtZXRhRGVzYzogc3RyaW5nXG4gIGNvbnN0IGZvcm1hdHRlZENyZWF0ZWRBdCA9IGRvYz8uY3JlYXRlZEF0XG4gICAgPyBmb3JtYXREYXRlKGRvYy5jcmVhdGVkQXQsIGRhdGVGb3JtYXQsIGkxOG4/Lmxhbmd1YWdlKVxuICAgIDogJydcblxuICBpZiAoY29sbGVjdGlvbikge1xuICAgIGNvbnN0IHVzZUFzVGl0bGUgPSBjb2xsZWN0aW9uPy5hZG1pbj8udXNlQXNUaXRsZSB8fCAnaWQnXG4gICAgbWV0YVRpdGxlID0gYCR7dCgndmVyc2lvbicpfSAtICR7Zm9ybWF0dGVkQ3JlYXRlZEF0fSAtICR7ZG9jW3VzZUFzVGl0bGVdfSAtICR7ZW50aXR5TGFiZWx9YFxuICAgIG1ldGFEZXNjID0gdCgndmlld2luZ1ZlcnNpb24nLCB7IGRvY3VtZW50VGl0bGU6IGRvY1t1c2VBc1RpdGxlXSwgZW50aXR5TGFiZWwgfSlcbiAgfVxuXG4gIGlmIChnbG9iYWwpIHtcbiAgICBtZXRhVGl0bGUgPSBgJHt0KCd2ZXJzaW9uJyl9IC0gJHtmb3JtYXR0ZWRDcmVhdGVkQXR9IC0gJHtlbnRpdHlMYWJlbH1gXG4gICAgbWV0YURlc2MgPSB0KCd2aWV3aW5nVmVyc2lvbkdsb2JhbCcsIHsgZW50aXR5TGFiZWwgfSlcbiAgfVxuXG4gIGxldCBjb21wYXJpc29uID0gY29tcGFyZURvYz8udmVyc2lvblxuXG4gIGlmIChjb21wYXJlVmFsdWU/LnZhbHVlID09PSAnbW9zdFJlY2VudCcpIHtcbiAgICBjb21wYXJpc29uID0gbW9zdFJlY2VudERvY1xuICB9XG5cbiAgaWYgKGNvbXBhcmVWYWx1ZT8udmFsdWUgPT09ICdwdWJsaXNoZWQnKSB7XG4gICAgY29tcGFyaXNvbiA9IHB1Ymxpc2hlZERvY1xuICB9XG5cbiAgY29uc3QgY2FuVXBkYXRlID0gZG9jUGVybWlzc2lvbnM/LnVwZGF0ZT8ucGVybWlzc2lvblxuXG4gIGlmIChpc0Vycm9yKSB7XG4gICAgcmV0dXJuIDxOb3RGb3VuZCBtYXJnaW5Ub3A9XCJsYXJnZVwiIC8+XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxtYWluIGNsYXNzTmFtZT17YmFzZUNsYXNzfT5cbiAgICAgIDxNZXRhIGRlc2NyaXB0aW9uPXttZXRhRGVzY30gdGl0bGU9e21ldGFUaXRsZX0gLz5cbiAgICAgIDxHdXR0ZXIgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X193cmFwYH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19oZWFkZXItd3JhcGB9PlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fY3JlYXRlZC1hdGB9PlxuICAgICAgICAgICAge3QoJ3ZlcnNpb25DcmVhdGVkT24nLCB7XG4gICAgICAgICAgICAgIHZlcnNpb246IHQoZG9jPy5hdXRvc2F2ZSA/ICdhdXRvc2F2ZWRWZXJzaW9uJyA6ICd2ZXJzaW9uJyksXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2hlYWRlcmB9PlxuICAgICAgICAgICAgPGgyPntmb3JtYXR0ZWRDcmVhdGVkQXR9PC9oMj5cbiAgICAgICAgICAgIHtjYW5VcGRhdGUgJiYgKFxuICAgICAgICAgICAgICA8UmVzdG9yZVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fcmVzdG9yZWB9XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17Y29sbGVjdGlvbn1cbiAgICAgICAgICAgICAgICBnbG9iYWw9e2dsb2JhbH1cbiAgICAgICAgICAgICAgICBvcmlnaW5hbERvY0lEPXtpZH1cbiAgICAgICAgICAgICAgICB2ZXJzaW9uRGF0ZT17Zm9ybWF0dGVkQ3JlYXRlZEF0fVxuICAgICAgICAgICAgICAgIHZlcnNpb25JRD17dmVyc2lvbklEfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19jb250cm9sc2B9PlxuICAgICAgICAgIDxDb21wYXJlVmVyc2lvblxuICAgICAgICAgICAgYmFzZVVSTD17Y29tcGFyZUJhc2VVUkx9XG4gICAgICAgICAgICBvbkNoYW5nZT17c2V0Q29tcGFyZVZhbHVlfVxuICAgICAgICAgICAgcGFyZW50SUQ9e3BhcmVudElEfVxuICAgICAgICAgICAgcHVibGlzaGVkRG9jPXtwdWJsaXNoZWREb2N9XG4gICAgICAgICAgICB2YWx1ZT17Y29tcGFyZVZhbHVlfVxuICAgICAgICAgICAgdmVyc2lvbklEPXt2ZXJzaW9uSUR9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7bG9jYWxpemF0aW9uICYmIChcbiAgICAgICAgICAgIDxTZWxlY3RMb2NhbGVzIG9uQ2hhbmdlPXtzZXRMb2NhbGVzfSBvcHRpb25zPXtsb2NhbGVPcHRpb25zfSB2YWx1ZT17bG9jYWxlc30gLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7ZG9jPy52ZXJzaW9uICYmIChcbiAgICAgICAgICA8UmVuZGVyRmllbGRzVG9EaWZmXG4gICAgICAgICAgICBjb21wYXJpc29uPXtjb21wYXJpc29ufVxuICAgICAgICAgICAgZmllbGRDb21wb25lbnRzPXtmaWVsZENvbXBvbmVudHN9XG4gICAgICAgICAgICBmaWVsZFBlcm1pc3Npb25zPXtmaWVsZFBlcm1pc3Npb25zfVxuICAgICAgICAgICAgZmllbGRzPXtmaWVsZHN9XG4gICAgICAgICAgICBsb2NhbGVzPXtcbiAgICAgICAgICAgICAgbG9jYWxlc1xuICAgICAgICAgICAgICAgID8gbG9jYWxlcy5tYXAoKHsgbGFiZWwgfSkgPT4gKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycgPyBsYWJlbCA6IHVuZGVmaW5lZCkpXG4gICAgICAgICAgICAgICAgOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVyc2lvbj17ZG9jPy52ZXJzaW9ufVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L0d1dHRlcj5cbiAgICA8L21haW4+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVmVyc2lvblZpZXdcbiJdLCJuYW1lcyI6WyJiYXNlQ2xhc3MiLCJWZXJzaW9uVmlldyIsImNvbGxlY3Rpb24iLCJnbG9iYWwiLCJhZG1pbiIsImRhdGVGb3JtYXQiLCJsb2NhbGl6YXRpb24iLCJyb3V0ZXMiLCJhcGkiLCJzZXJ2ZXJVUkwiLCJ1c2VDb25maWciLCJzZXRTdGVwTmF2IiwidXNlU3RlcE5hdiIsInNldFZpZXdBY3Rpb25zIiwidXNlQWN0aW9ucyIsInBhcmFtcyIsImlkIiwidmVyc2lvbklEIiwidXNlUm91dGVNYXRjaCIsImNvbXBhcmVWYWx1ZSIsInNldENvbXBhcmVWYWx1ZSIsInVzZVN0YXRlIiwibW9zdFJlY2VudFZlcnNpb25PcHRpb24iLCJsb2NhbGVPcHRpb25zIiwibG9jYWxlcyIsIm1hcCIsImNvZGUiLCJsYWJlbCIsInZhbHVlIiwic2V0TG9jYWxlcyIsInBlcm1pc3Npb25zIiwidXNlQXV0aCIsImxvY2FsZSIsInVzZUxvY2FsZSIsImkxOG4iLCJ0IiwidXNlVHJhbnNsYXRpb24iLCJkb2NQZXJtaXNzaW9ucyIsInVzZURvY3VtZW50SW5mbyIsIm9yaWdpbmFsRG9jRmV0Y2hVUkwiLCJ2ZXJzaW9uRmV0Y2hVUkwiLCJlbnRpdHlMYWJlbCIsImZpZWxkcyIsImZpZWxkUGVybWlzc2lvbnMiLCJjb21wYXJlQmFzZVVSTCIsInNsdWciLCJwYXJlbnRJRCIsImdldFRyYW5zbGF0aW9uIiwibGFiZWxzIiwic2luZ3VsYXIiLCJjb2xsZWN0aW9ucyIsImdsb2JhbHMiLCJjb21wYXJlRmV0Y2hVUkwiLCJkYXRhIiwiZG9jIiwiaXNFcnJvciIsInVzZVBheWxvYWRBUEkiLCJpbml0aWFsUGFyYW1zIiwiZGVwdGgiLCJwdWJsaXNoZWREb2MiLCJtb3N0UmVjZW50RG9jIiwiZHJhZnQiLCJjb21wYXJlRG9jIiwidXNlRWZmZWN0IiwibmF2IiwiZG9jTGFiZWwiLCJ1c2VBc1RpdGxlIiwidGl0bGVGaWVsZCIsImZpbmQiLCJmaWVsZCIsImZpZWxkQWZmZWN0c0RhdGEiLCJuYW1lIiwibG9jYWxpemVkIiwicGx1cmFsIiwidXJsIiwiY3JlYXRlZEF0IiwiZm9ybWF0RGF0ZSIsImxhbmd1YWdlIiwiZWRpdENvbmZpZyIsImNvbXBvbmVudHMiLCJ2aWV3cyIsIkVkaXQiLCJ2ZXJzaW9uQWN0aW9ucyIsIlZlcnNpb24iLCJhY3Rpb25zIiwibWV0YVRpdGxlIiwibWV0YURlc2MiLCJmb3JtYXR0ZWRDcmVhdGVkQXQiLCJkb2N1bWVudFRpdGxlIiwiY29tcGFyaXNvbiIsInZlcnNpb24iLCJjYW5VcGRhdGUiLCJ1cGRhdGUiLCJwZXJtaXNzaW9uIiwiTm90Rm91bmQiLCJtYXJnaW5Ub3AiLCJtYWluIiwiY2xhc3NOYW1lIiwiTWV0YSIsImRlc2NyaXB0aW9uIiwidGl0bGUiLCJHdXR0ZXIiLCJkaXYiLCJwIiwiYXV0b3NhdmUiLCJoZWFkZXIiLCJoMiIsIlJlc3RvcmUiLCJvcmlnaW5hbERvY0lEIiwidmVyc2lvbkRhdGUiLCJDb21wYXJlVmVyc2lvbiIsImJhc2VVUkwiLCJvbkNoYW5nZSIsIlNlbGVjdExvY2FsZXMi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